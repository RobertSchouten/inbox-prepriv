[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Contact", 
  "modified": "2016-08-22 17:29:20.552905", 
  "name": "Contact-Client", 
  "script": "frappe.ui.form.on(\"Contact\", {\nonload:function(frm){\n\t\tif(frappe.route_titles[\"update_contact\"])\n\t\t{\n\t\t\tfrappe.confirm(\"change email address from \"+cur_frm.doc.email_id+ \" to \"+frappe.route_titles[\"update_contact\"][\"email_id\"]\n\t\t\t\t,function(){\n\t\t\t\t\tcur_frm.doc.email_id = frappe.route_titles[\"update_contact\"][\"email_id\"];\n\t\t\t\t\tcur_frm.refresh();\n\t\t\t\t\tcur_frm.dirty();\n\t\t\t\t\tdelete frappe.route_titles[\"update_contact\"];\n\t\t\t\t},function(){\n\t\t\t\t\tdelete frappe.route_titles[\"update_contact\"];\n\t\t\t\t})\n\n\t\t}\n\t},\nvalidate: function(frm) {\n\t\tvar fieldlist = [\"supplier\",\"customer\",\"user\",\"organisation\"]\n\t\tif(frappe.route_titles[\"create_contact\"]==1&&!($.map(fieldlist,function(v){return frm.doc[v]?true:false}).indexOf(true)!=-1)){\n\t\t\t$.each(fieldlist,function(i,v){\t\t\t\n\t\t\t\tcur_frm.set_df_property(v,\"reqd\",1);\n\t\t\t})\n\t\t\n\t\t} else {\n\t\t\t$.each(fieldlist,function(i,v){\t\t\t\n\t\t\t\tcur_frm.set_df_property(v,\"reqd\",0);\n\t\t\t})\n\t\t}\n},\nafter_save:function(frm){\n\t\tif (frappe.route_titles[\"create_contact\"])\n\t\t{\n\t\t\tdelete frappe.route_titles[\"create_contact\"]\n\t\t\tfrappe.set_route(\"Email Inbox\");\n\t\t\tfrappe.route();\n\t\t}\n\t}\n});", 
  "script_type": "Client"
 }
]